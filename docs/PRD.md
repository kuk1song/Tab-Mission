# Tab Mosaic Overview – PRD (MVP)

## 1. 背景与目标
- 痛点：在 Chrome 中切换大量标签页时，列表/搜索虽高效，但缺少类似 macOS Mission Control 的“铺开可视化选择”的直觉。
- 目标：提供“快速铺开网格 + 搜索 + 键盘导航”的标签总览，后续演进为“带权不规则马赛克 + 丝滑动画”的近似体验。

## 2. 用户画像与场景
- 重度浏览器用户：同时打开 20–100+ 标签，跨多个窗口。
- 关键场景：基于视觉线索/标题/域，快速定位“记忆中的某个页面”，不中断当前上下文太久。

## 3. 核心价值
- 降低寻找成本：缩略图、标题、域名；配合搜索与最近使用排序。
- 降低切换成本：全键盘、明确焦点、高对比设计、稳定布局。

## 4. 版本范围
### v0（当前 MVP）
- 呼出：扩展图标或快捷键（默认 Ctrl+Shift+E，可自定义）。
- 窗口：适中 popup，暗色幕布（不全屏）。
- 展示：响应式网格卡片；favicon+标题+域名；缩略图懒加载。
- 搜索：标题/URL 子串过滤；实时更新。
- 导航：方向键/Tab；Enter 打开；Esc 关闭。
- 截图：`chrome.debugger`/CDP `Page.captureScreenshot`，并发限流、渐进淡入。

### v1（“艺术化”增强）
- 布局：Squarified Treemap（权重=最近使用×停留时长×分组）。
- 动效：铺开/聚焦/返回过渡；键盘移动微动效。
- 排序：默认最近使用；支持按窗口/域名分组。

### v2（可选）
- Voronoi Treemap（更有机）。
- 悬停时局部刷新缩略图；缓存上次截图。
- 记忆用户偏好（排序/分组/尺寸）。

## 5. 非目标/约束
- 不做“实时活画面”缩放（浏览器架构限制）。
- 不做真实透明/桌面透视（需屏幕捕捉授权；隐私/复杂度不符）。
- 不抢焦：未选择前不改变原标签状态。

## 6. 指标（MVP 验证）
- 从呼出到打开目标标签的平均用时（对比 Command+Shift+A）。
- 1.5s 内出现截图的比例（目标 >70%）。
- 控制台无报错；主线程无>50ms长任务。

## 7. 技术方案
- MV3：`background`（开窗）、`overview.html/js/css`（UI）。
- 权限：`tabs`、`windows`、`activeTab`、`debugger`、`<all_urls>`。
- 截图：CDP `Page.captureScreenshot`；4 并发；失败降级为空图；后续缓存。
- 性能：懒加载、requestIdleCallback、CSS 硬件加速、限流池化。

## 8. 风险与对策
- 调试权限敏感：仅在概览期间 attach；关闭即 detach；文案说明。
- 标签过多：严格限流；超时放弃；逐步渲染；提供搜索优先。
- 特殊页面不可截：接受空图；依赖标题/域名。

## 9. 里程碑
- M0：当前 MVP（网格+搜索+键盘+截图淡入）
- M1：Treemap 布局 + 链路动效
- M2：可选有机布局/缓存/更多分组


